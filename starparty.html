<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Star Party Planner – 2025-08-28 (America/Chicago)</title>

    <style>
      :root { color-scheme: dark; --ctrl-h: 52px; } /* updated dynamically via JS */
      html, body { background: #000; color: #f33; }
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif; line-height: 1.35; }
      ::selection { background: #400; color: #fdd; }
      a { color: #f66; text-decoration: underline; }
      h1,h2,h3 { color: #f44; margin: 0.8rem 0 0.4rem; }
      .container { max-width: 1100px; margin: 0 auto; padding: 1rem; }

      .hr { border: 0; height: 1px; background: #400; margin: 1rem 0; }
      .small { font-size: 0.9rem; color: #f66; }
      .warn { color:#f77; font-style: italic; }

      /* Non-sticky meta bar (scrolls away): location/date/window/generated */
      .meta-bar { display:flex; gap:0.6rem; align-items:center; flex-wrap:wrap; margin-bottom: 0.5rem; }
      .pill { border:1px solid #700; padding:0.25rem 0.5rem; border-radius:999px; color:#f66; }

      /* Sticky control bar: search + hour links + (tabs) */
      .control-bar { position: sticky; top: 0; background: rgba(0,0,0,0.98); border-bottom: 1px solid #400; padding: 0.5rem; z-index: 5; display:flex; gap:0.6rem; align-items:center; flex-wrap:wrap; overflow: visible; }
      .control-bar input[type="search"] { background: #160000; border: 1px solid #700; color: #f55; padding: 0.4rem 0.6rem; border-radius: 6px; min-width: 220px; caret-color: #f55; outline: none; }
      .control-bar input[type="search"]::placeholder { color:#f66; }
      .control-bar input[type="search"]:focus { box-shadow: 0 0 0 2px #500 inset; border-color:#900; }
      * { -webkit-tap-highlight-color: rgba(255, 0, 0, 0.2); }

      /* Prevent white autofill on iOS/Safari/Chrome */
      input:-webkit-autofill,
      input:-webkit-autofill:hover,
      input:-webkit-autofill:focus {
        -webkit-text-fill-color: #f55;
        transition: background-color 5000s ease-in-out 0s;
        box-shadow: 0 0 0px 1000px #160000 inset;
        border: 1px solid #700;
      }

      /* Hour links — wrap to new lines (no scroll) */
      .hours { display:flex; gap:0.35rem; flex-wrap:wrap; overflow: visible; max-height: none; }
      .hours a { display:inline-block; padding: 0.25rem 0.55rem; border:1px solid #500; border-radius:6px; text-decoration:none; }
      .hours a:focus { outline:none; box-shadow: 0 0 0 2px #500 inset; }

      /* Tables */
      .table-wrap { overflow-x: auto; -webkit-overflow-scrolling: touch; }
      table { width: 100%; border-collapse: collapse; margin: 0.5rem 0 1rem; }
      th, td { border: 1px solid #700; padding: 0.45rem 0.5rem; }
      /* Header sticks directly below the current control bar height */
      th { background: #100; position: sticky; top: var(--ctrl-h); z-index: 1; }
      tr:nth-child(even) { background: #070707; }
      tr:hover { background: #111; }
      th.sortable { cursor: pointer; }
      th.sortable:after { content: " ⇅"; color:#f66; font-weight: normal; }

      /* Accordions */
      .acc { border: 1px solid #400; border-radius: 8px; margin: 0.5rem 0; background:#050505; }
      .acc summary { cursor: pointer; padding: 0.5rem 0.7rem; list-style:none; display:flex; justify-content:space-between; align-items:center; }
      .acc summary::-webkit-details-marker { display:none; }
      .acc summary:hover { background:#0a0a0a; }
      .acc-time { font-weight:600; color:#f55; }
      .acc-count { font-size:0.9rem; color:#f77; }

      /* Tabs (inside sticky control bar) */
      .tabs { display:flex; gap:0.4rem; }
      .tab { padding:0.35rem 0.7rem; border:1px solid #500; border-radius:8px; cursor:pointer; user-select:none; color:#f66; background:#0a0000; }
      .tab.active { background:#180000; border-color:#700; color:#f66; }

      .hidden { display:none; }

      /* Phone tweaks */
      @media (max-width: 640px) {
        body { font-size: 15px; }
        th, td { padding: 0.35rem 0.45rem; }
        .pill { font-size: 0.85rem; }
        .control-bar { gap:0.5rem; }
        .tabs { gap:0.3rem; }
        .tab { padding:0.3rem 0.55rem; }
        /* Disable sticky table headers on phones to avoid overlay issues */
        th { position: static !important; top: auto !important; z-index: auto !important; }
      }
    </style>
    
<div class="container">
  <h1>Star Party Planner</h1>

  <!-- Non-sticky meta bar -->
  <div class="meta-bar">
    <span class="pill">Location: 44.810265, -93.939783</span>
    <span class="pill">Date: 2025-08-28</span>
    <span class="pill">Window: 20:00–01:00 America/Chicago</span>
    <span class="pill">Generated: 2025-08-28 15:48 CDT</span>
  </div>

  <!-- Sticky controls -->
  <div class="control-bar">
    <input id="q" type="search" placeholder="Search targets… (name, type, notes)" aria-label="Search">
    <span class="hours"><a href="#hour-2025-08-28_2000">20:00</a> <a href="#hour-2025-08-28_2100">21:00</a> <a href="#hour-2025-08-28_2200">22:00</a> <a href="#hour-2025-08-28_2300">23:00</a> <a href="#hour-2025-08-29_0000">00:00</a> <a href="#hour-2025-08-29_0100">01:00</a></span>
    
          <div class="tabs">
            <div class="tab active" data-tab="panel-master">Master List</div>
            <div class="tab" data-tab="panel-hourly">By Hour</div>
          </div>
        
  </div>

  
          <section id="panel-master" class="tab-panel">
            <div class="table-wrap"><table class="dataframe" id="tbl-master">
  <thead>
    <tr style="text-align: right;">
      <th>Name</th>
      <th>Type</th>
      <th>Mag</th>
      <th>Best Local Time</th>
      <th>Best Alt (°)</th>
      <th>Best Dir</th>
      <th>Best Az (°)</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Saturn</td>
      <td>Planet</td>
      <td></td>
      <td>01:00</td>
      <td>37.0</td>
      <td>SE</td>
      <td>144.8</td>
      <td></td>
    </tr>
    <tr>
      <td>Moon</td>
      <td>Moon</td>
      <td></td>
      <td>20:00</td>
      <td>15.0</td>
      <td>SW</td>
      <td>219.8</td>
      <td></td>
    </tr>
    <tr>
      <td>Mars</td>
      <td>Planet</td>
      <td></td>
      <td>20:00</td>
      <td>13.2</td>
      <td>WSW</td>
      <td>248.6</td>
      <td></td>
    </tr>
    <tr>
      <td>M92</td>
      <td>Globular cluster</td>
      <td>6.4</td>
      <td>20:04</td>
      <td>88.3</td>
      <td>S</td>
      <td>182.0</td>
      <td>NGC 6341</td>
    </tr>
    <tr>
      <td>M13</td>
      <td>Globular cluster</td>
      <td>5.8</td>
      <td>20:00</td>
      <td>79.7</td>
      <td>SW</td>
      <td>218.2</td>
      <td>Great Hercules Cluster NGC 6205</td>
    </tr>
    <tr>
      <td>M56</td>
      <td>Globular cluster</td>
      <td>8.3</td>
      <td>22:04</td>
      <td>75.4</td>
      <td>S</td>
      <td>180.8</td>
      <td>NGC 6779</td>
    </tr>
    <tr>
      <td>NGC 7000</td>
      <td>Emission Nebula</td>
      <td>4.0</td>
      <td>23:42</td>
      <td>89.8</td>
      <td>S</td>
      <td>175.3</td>
      <td>North America Nebula (widefield)</td>
    </tr>
    <tr>
      <td>IC 5070</td>
      <td>Emission Nebula</td>
      <td>7.5</td>
      <td>23:42</td>
      <td>89.6</td>
      <td>S</td>
      <td>177.5</td>
      <td>Pelican Nebula (widefield)</td>
    </tr>
    <tr>
      <td>NGC 6992</td>
      <td>Supernova Remnant</td>
      <td>6.0</td>
      <td>23:46</td>
      <td>76.3</td>
      <td>S</td>
      <td>180.7</td>
      <td>Veil East</td>
    </tr>
    <tr>
      <td>M71</td>
      <td>Globular cluster</td>
      <td>8.2</td>
      <td>22:40</td>
      <td>64.0</td>
      <td>S</td>
      <td>179.9</td>
      <td>Angelfish Cluster NGC 6838</td>
    </tr>
    <tr>
      <td>NGC 6960</td>
      <td>Supernova Remnant</td>
      <td>5.0</td>
      <td>23:24</td>
      <td>76.0</td>
      <td>S</td>
      <td>180.1</td>
      <td>Veil West (Witch's Broom)</td>
    </tr>
    <tr>
      <td>M57</td>
      <td>Planetary nebula</td>
      <td>8.8</td>
      <td>21:40</td>
      <td>78.3</td>
      <td>S</td>
      <td>179.9</td>
      <td>Ring Nebula NGC 6720</td>
    </tr>
    <tr>
      <td>Neptune</td>
      <td>Planet</td>
      <td></td>
      <td>01:00</td>
      <td>38.1</td>
      <td>SE</td>
      <td>143.2</td>
      <td></td>
    </tr>
    <tr>
      <td>M15</td>
      <td>Globular cluster</td>
      <td>6.2</td>
      <td>00:16</td>
      <td>57.5</td>
      <td>S</td>
      <td>179.9</td>
      <td>Great Pegasus Cluster NGC 7078</td>
    </tr>
    <tr>
      <td>Uranus</td>
      <td>Planet</td>
      <td></td>
      <td>01:00</td>
      <td>17.2</td>
      <td>ENE</td>
      <td>78.2</td>
      <td></td>
    </tr>
    <tr>
      <td>NGC 7635</td>
      <td>Emission Nebula</td>
      <td>8.4</td>
      <td>01:00</td>
      <td>70.5</td>
      <td>NNE</td>
      <td>25.7</td>
      <td>Bubble Nebula</td>
    </tr>
    <tr>
      <td>M27</td>
      <td>Planetary nebula</td>
      <td>7.4</td>
      <td>22:46</td>
      <td>68.0</td>
      <td>S</td>
      <td>180.0</td>
      <td>Dumbbell Nebula NGC 6853</td>
    </tr>
    <tr>
      <td>M39</td>
      <td>Open cluster</td>
      <td>4.6</td>
      <td>00:18</td>
      <td>86.3</td>
      <td>N</td>
      <td>359.3</td>
      <td>Pyramid Cluster NGC 7092</td>
    </tr>
    <tr>
      <td>M3</td>
      <td>Globular cluster</td>
      <td>6.2</td>
      <td>20:00</td>
      <td>45.4</td>
      <td>W</td>
      <td>266.7</td>
      <td>NGC 5272</td>
    </tr>
    <tr>
      <td>M2</td>
      <td>Globular cluster</td>
      <td>6.5</td>
      <td>00:20</td>
      <td>44.5</td>
      <td>S</td>
      <td>180.1</td>
      <td>NGC 7089</td>
    </tr>
    <tr>
      <td>M29</td>
      <td>Open cluster</td>
      <td>7.1</td>
      <td>23:10</td>
      <td>83.8</td>
      <td>S</td>
      <td>179.7</td>
      <td>Cooling Tower Cluster NGC 6913</td>
    </tr>
    <tr>
      <td>M12</td>
      <td>Globular cluster</td>
      <td>6.7</td>
      <td>20:00</td>
      <td>42.8</td>
      <td>S</td>
      <td>188.8</td>
      <td>NGC 6218</td>
    </tr>
    <tr>
      <td>NGC 281</td>
      <td>Emission Nebula</td>
      <td>7.4</td>
      <td>01:00</td>
      <td>62.8</td>
      <td>NE</td>
      <td>49.8</td>
      <td>Pacman Nebula</td>
    </tr>
    <tr>
      <td>M14</td>
      <td>Globular cluster</td>
      <td>7.6</td>
      <td>20:24</td>
      <td>41.9</td>
      <td>S</td>
      <td>179.8</td>
      <td>NGC 6402</td>
    </tr>
    <tr>
      <td>M10</td>
      <td>Globular cluster</td>
      <td>6.6</td>
      <td>20:00</td>
      <td>40.9</td>
      <td>S</td>
      <td>185.2</td>
      <td>NGC 6254</td>
    </tr>
    <tr>
      <td>M5</td>
      <td>Globular cluster</td>
      <td>5.6</td>
      <td>20:00</td>
      <td>40.3</td>
      <td>SW</td>
      <td>218.9</td>
      <td>Rose Cluster NGC 5904</td>
    </tr>
    <tr>
      <td>M53</td>
      <td>Globular cluster</td>
      <td>7.6</td>
      <td>20:00</td>
      <td>33.7</td>
      <td>W</td>
      <td>262.0</td>
      <td>NGC 5024</td>
    </tr>
    <tr>
      <td>M107</td>
      <td>Globular cluster</td>
      <td>7.9</td>
      <td>20:00</td>
      <td>31.4</td>
      <td>SSW</td>
      <td>191.5</td>
      <td>Crucifix Cluster NGC 6171</td>
    </tr>
    <tr>
      <td>M52</td>
      <td>Open cluster</td>
      <td>7.3</td>
      <td>01:00</td>
      <td>70.2</td>
      <td>NNE</td>
      <td>25.0</td>
      <td>Scorpion Cluster NGC 7654</td>
    </tr>
    <tr>
      <td>M9</td>
      <td>Globular cluster</td>
      <td>7.7</td>
      <td>20:06</td>
      <td>26.6</td>
      <td>S</td>
      <td>179.9</td>
      <td>NGC 6333</td>
    </tr>
    <tr>
      <td>M75</td>
      <td>Globular cluster</td>
      <td>8.5</td>
      <td>22:52</td>
      <td>23.3</td>
      <td>S</td>
      <td>179.8</td>
      <td>NGC 6864</td>
    </tr>
    <tr>
      <td>M31</td>
      <td>Spiral galaxy</td>
      <td>3.4</td>
      <td>01:00</td>
      <td>62.8</td>
      <td>E</td>
      <td>83.9</td>
      <td>Andromeda Galaxy NGC 224</td>
    </tr>
    <tr>
      <td>M30</td>
      <td>Globular cluster</td>
      <td>7.2</td>
      <td>00:26</td>
      <td>22.1</td>
      <td>S</td>
      <td>179.8</td>
      <td>Jellyfish Cluster NGC 7099</td>
    </tr>
    <tr>
      <td>M22</td>
      <td>Globular cluster</td>
      <td>5.1</td>
      <td>21:24</td>
      <td>21.3</td>
      <td>S</td>
      <td>180.1</td>
      <td>Great Sagittarius Cluster NGC 6656</td>
    </tr>
    <tr>
      <td>M80</td>
      <td>Globular cluster</td>
      <td>7.3</td>
      <td>20:00</td>
      <td>21.0</td>
      <td>SSW</td>
      <td>193.7</td>
      <td>NGC 6093</td>
    </tr>
    <tr>
      <td>M28</td>
      <td>Globular cluster</td>
      <td>6.8</td>
      <td>21:12</td>
      <td>20.3</td>
      <td>S</td>
      <td>180.1</td>
      <td>NGC 6626</td>
    </tr>
    <tr>
      <td>M101</td>
      <td>Spiral galaxy</td>
      <td>7.9</td>
      <td>20:00</td>
      <td>58.4</td>
      <td>NW</td>
      <td>304.6</td>
      <td>Pinwheel Galaxy NGC 5457</td>
    </tr>
    <tr>
      <td>M103</td>
      <td>Open cluster</td>
      <td>7.4</td>
      <td>01:00</td>
      <td>56.9</td>
      <td>NE</td>
      <td>43.1</td>
      <td>NGC 581</td>
    </tr>
    <tr>
      <td>M51</td>
      <td>Spiral galaxy</td>
      <td>8.4</td>
      <td>20:00</td>
      <td>51.9</td>
      <td>WNW</td>
      <td>293.9</td>
      <td>Whirlpool Galaxy NGC 5194, NGC 5195</td>
    </tr>
    <tr>
      <td>M16</td>
      <td>H II region nebula with cluster</td>
      <td>6.4</td>
      <td>21:06</td>
      <td>31.4</td>
      <td>S</td>
      <td>180.0</td>
      <td>Eagle Nebula NGC 6611</td>
    </tr>
    <tr>
      <td>M17</td>
      <td>H II region nebula with cluster</td>
      <td>6.0</td>
      <td>21:08</td>
      <td>29.0</td>
      <td>S</td>
      <td>180.1</td>
      <td>Omega, Swan, Horseshoe, Lobster, or Checkmark Nebula NGC 6618</td>
    </tr>
    <tr>
      <td>M33</td>
      <td>Spiral galaxy</td>
      <td>5.7</td>
      <td>01:00</td>
      <td>48.8</td>
      <td>E</td>
      <td>92.2</td>
      <td>Triangulum/Pinwheel Galaxy NGC 598</td>
    </tr>
    <tr>
      <td>M63</td>
      <td>Spiral galaxy</td>
      <td>8.6</td>
      <td>20:00</td>
      <td>47.7</td>
      <td>WNW</td>
      <td>287.8</td>
      <td>Sunflower Galaxy NGC 5055</td>
    </tr>
    <tr>
      <td>NGC 6826</td>
      <td>Planetary Nebula</td>
      <td>8.8</td>
      <td>22:28</td>
      <td>84.2</td>
      <td>N</td>
      <td>1.2</td>
      <td>Blinking</td>
    </tr>
    <tr>
      <td>M94</td>
      <td>Spiral galaxy</td>
      <td>8.2</td>
      <td>20:00</td>
      <td>43.2</td>
      <td>WNW</td>
      <td>289.6</td>
      <td>Crocodile Eye or Cat's Eye Galaxy NGC 4736</td>
    </tr>
    <tr>
      <td>M34</td>
      <td>Open cluster</td>
      <td>5.5</td>
      <td>01:00</td>
      <td>42.9</td>
      <td>ENE</td>
      <td>67.3</td>
      <td>Spiral Cluster NGC 1039</td>
    </tr>
    <tr>
      <td>M20</td>
      <td>H II region nebula with cluster</td>
      <td>6.3</td>
      <td>20:50</td>
      <td>22.2</td>
      <td>S</td>
      <td>180.1</td>
      <td>Trifid Nebula NGC 6514</td>
    </tr>
    <tr>
      <td>M106</td>
      <td>Spiral galaxy</td>
      <td>8.4</td>
      <td>20:00</td>
      <td>40.8</td>
      <td>WNW</td>
      <td>300.5</td>
      <td>NGC 4258</td>
    </tr>
    <tr>
      <td>M8</td>
      <td>Nebula with cluster</td>
      <td>4.6</td>
      <td>20:50</td>
      <td>20.8</td>
      <td>S</td>
      <td>179.8</td>
      <td>Lagoon Nebula NGC 6523</td>
    </tr>
    <tr>
      <td>M11</td>
      <td>Open cluster</td>
      <td>5.8</td>
      <td>21:38</td>
      <td>39.0</td>
      <td>S</td>
      <td>180.0</td>
      <td>Wild Duck Cluster NGC 6705</td>
    </tr>
    <tr>
      <td>M24</td>
      <td>Milky Way star cloud</td>
      <td>2.5</td>
      <td>21:04</td>
      <td>26.6</td>
      <td>S</td>
      <td>180.0</td>
      <td>Small Sagittarius Star Cloud IC 4715</td>
    </tr>
    <tr>
      <td>M26</td>
      <td>Open cluster</td>
      <td>8.0</td>
      <td>21:32</td>
      <td>35.8</td>
      <td>S</td>
      <td>180.0</td>
      <td>NGC 6694</td>
    </tr>
    <tr>
      <td>M81</td>
      <td>Spiral galaxy</td>
      <td>6.9</td>
      <td>20:00</td>
      <td>35.0</td>
      <td>NNW</td>
      <td>335.5</td>
      <td>Bode's Galaxy NGC 3031</td>
    </tr>
    <tr>
      <td>M64</td>
      <td>Spiral galaxy</td>
      <td>8.5</td>
      <td>20:00</td>
      <td>33.2</td>
      <td>W</td>
      <td>268.2</td>
      <td>Black Eye Galaxy NGC 4826</td>
    </tr>
    <tr>
      <td>M82</td>
      <td>Starburst galaxy</td>
      <td>8.4</td>
      <td>20:00</td>
      <td>35.4</td>
      <td>NNW</td>
      <td>336.1</td>
      <td>Cigar Galaxy NGC 3034</td>
    </tr>
    <tr>
      <td>IC 342</td>
      <td>Galaxy</td>
      <td>8.4</td>
      <td>01:00</td>
      <td>43.1</td>
      <td>NNE</td>
      <td>30.4</td>
      <td>Hidden Galaxy</td>
    </tr>
    <tr>
      <td>NGC 7789</td>
      <td>Open Cluster</td>
      <td>6.7</td>
      <td>01:00</td>
      <td>69.9</td>
      <td>NE</td>
      <td>43.9</td>
      <td>Caroline's Rose</td>
    </tr>
    <tr>
      <td>NGC 6543</td>
      <td>Planetary Nebula</td>
      <td>8.1</td>
      <td>20:44</td>
      <td>68.2</td>
      <td>N</td>
      <td>0.1</td>
      <td>Cat's Eye</td>
    </tr>
    <tr>
      <td>M18</td>
      <td>Open cluster</td>
      <td>7.5</td>
      <td>21:06</td>
      <td>28.1</td>
      <td>S</td>
      <td>179.7</td>
      <td>Black Swan Cluster NGC 6613</td>
    </tr>
    <tr>
      <td>M23</td>
      <td>Open cluster</td>
      <td>5.5</td>
      <td>20:44</td>
      <td>26.2</td>
      <td>S</td>
      <td>180.0</td>
      <td>NGC 6494</td>
    </tr>
    <tr>
      <td>M25</td>
      <td>Open cluster</td>
      <td>4.6</td>
      <td>21:18</td>
      <td>26.0</td>
      <td>S</td>
      <td>179.8</td>
      <td>IC 4725</td>
    </tr>
    <tr>
      <td>M110</td>
      <td>Dwarf elliptical galaxy</td>
      <td>8.5</td>
      <td>01:00</td>
      <td>63.4</td>
      <td>E</td>
      <td>83.3</td>
      <td>Andromeda Satellite #2 NGC 205</td>
    </tr>
    <tr>
      <td>M21</td>
      <td>Open cluster</td>
      <td>6.5</td>
      <td>20:52</td>
      <td>22.7</td>
      <td>S</td>
      <td>180.1</td>
      <td>Webb's Cross Cluster NGC 6531</td>
    </tr>
    <tr>
      <td>M32</td>
      <td>Dwarf elliptical galaxy</td>
      <td>8.1</td>
      <td>01:00</td>
      <td>62.7</td>
      <td>E</td>
      <td>84.7</td>
      <td>Andromeda Satellite #1 NGC 221</td>
    </tr>
    <tr>
      <td>M45</td>
      <td>Open cluster</td>
      <td>1.6</td>
      <td>01:00</td>
      <td>21.3</td>
      <td>ENE</td>
      <td>76.5</td>
      <td>Pleiades, Seven Sisters or Subaru</td>
    </tr>
    <tr>
      <td>NGC 457</td>
      <td>Open Cluster</td>
      <td>6.4</td>
      <td>01:00</td>
      <td>58.9</td>
      <td>NE</td>
      <td>47.3</td>
      <td>Owl/ET Cluster</td>
    </tr>
    <tr>
      <td>NGC 663</td>
      <td>Open Cluster</td>
      <td>7.1</td>
      <td>01:00</td>
      <td>55.3</td>
      <td>NE</td>
      <td>42.4</td>
      <td>Perseus</td>
    </tr>
    <tr>
      <td>NGC 6934</td>
      <td>Globular Cluster</td>
      <td>8.8</td>
      <td>23:20</td>
      <td>52.7</td>
      <td>S</td>
      <td>179.7</td>
      <td>Delphinus</td>
    </tr>
    <tr>
      <td>NGC 2403</td>
      <td>Galaxy</td>
      <td>8.9</td>
      <td>01:00</td>
      <td>24.4</td>
      <td>NNE</td>
      <td>16.6</td>
      <td>Camelopardalis</td>
    </tr>
    <tr>
      <td>NGC 869</td>
      <td>Open Cluster</td>
      <td>4.3</td>
      <td>01:00</td>
      <td>50.9</td>
      <td>NE</td>
      <td>48.9</td>
      <td>Double Cluster component</td>
    </tr>
    <tr>
      <td>NGC 884</td>
      <td>Open Cluster</td>
      <td>4.4</td>
      <td>01:00</td>
      <td>50.9</td>
      <td>NE</td>
      <td>48.9</td>
      <td>Double Cluster component</td>
    </tr>
    <tr>
      <td>NGC 752</td>
      <td>Open Cluster</td>
      <td>5.7</td>
      <td>01:00</td>
      <td>48.3</td>
      <td>E</td>
      <td>79.2</td>
      <td>Sprawling cluster in Andromeda</td>
    </tr>
    <tr>
      <td>M73</td>
      <td>Asterism</td>
      <td>9.0</td>
      <td>23:46</td>
      <td>32.7</td>
      <td>S</td>
      <td>180.2</td>
      <td>NGC 6994</td>
    </tr>
    <tr>
      <td>M60</td>
      <td>Elliptical galaxy</td>
      <td>8.8</td>
      <td>20:00</td>
      <td>24.1</td>
      <td>W</td>
      <td>262.1</td>
      <td>NGC 4649</td>
    </tr>
    <tr>
      <td>M87</td>
      <td>Elliptical galaxy</td>
      <td>8.6</td>
      <td>20:00</td>
      <td>22.4</td>
      <td>W</td>
      <td>265.1</td>
      <td>Virgo A NGC 4486</td>
    </tr>
    <tr>
      <td>NGC 7009</td>
      <td>Planetary Nebula</td>
      <td>8.0</td>
      <td>23:50</td>
      <td>33.9</td>
      <td>S</td>
      <td>179.8</td>
      <td>Saturn Nebula</td>
    </tr>
    <tr>
      <td>M40</td>
      <td>Optical Double</td>
      <td>8.4</td>
      <td>20:00</td>
      <td>45.2</td>
      <td>NW</td>
      <td>314.0</td>
      <td>Winnecke 4</td>
    </tr>
    <tr>
      <td>M86</td>
      <td>Lenticular galaxy</td>
      <td>8.9</td>
      <td>20:00</td>
      <td>21.9</td>
      <td>W</td>
      <td>266.4</td>
      <td>NGC 4406</td>
    </tr>
  </tbody>
</table></div>
          </section>
          <section id="panel-hourly" class="tab-panel hidden">
            <p class="small">Top targets each hour, prioritized by interest score. Directions are compass points.</p>
            
                <section id="hour-2025-08-28_2000" class="hour-tab-panel hidden">
                  <h3>2025-08-28 20:00</h3>
                  <div class="table-wrap"><table class="dataframe" id="tbl-hour-2025-08-28_2000">
  <thead>
    <tr style="text-align: right;">
      <th>Name</th>
      <th>Type</th>
      <th>Alt (°)</th>
      <th>Dir</th>
      <th>Az (°)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Moon</td>
      <td>Moon</td>
      <td>15.0</td>
      <td>SW</td>
      <td>219.8</td>
    </tr>
    <tr>
      <td>Mars</td>
      <td>Planet</td>
      <td>13.2</td>
      <td>WSW</td>
      <td>248.6</td>
    </tr>
    <tr>
      <td>M92</td>
      <td>Globular cluster</td>
      <td>88.2</td>
      <td>SSE</td>
      <td>158.3</td>
    </tr>
    <tr>
      <td>M13</td>
      <td>Globular cluster</td>
      <td>79.7</td>
      <td>SW</td>
      <td>218.2</td>
    </tr>
    <tr>
      <td>M56</td>
      <td>Globular cluster</td>
      <td>61.8</td>
      <td>ESE</td>
      <td>110.5</td>
    </tr>
    <tr>
      <td>M71</td>
      <td>Globular cluster</td>
      <td>47.8</td>
      <td>ESE</td>
      <td>114.7</td>
    </tr>
    <tr>
      <td>M57</td>
      <td>Planetary nebula</td>
      <td>67.4</td>
      <td>ESE</td>
      <td>112.6</td>
    </tr>
    <tr>
      <td>NGC 6960</td>
      <td>Supernova Remnant</td>
      <td>48.0</td>
      <td>E</td>
      <td>91.4</td>
    </tr>
    <tr>
      <td>NGC 7000</td>
      <td>Emission Nebula</td>
      <td>51.2</td>
      <td>ENE</td>
      <td>69.9</td>
    </tr>
    <tr>
      <td>IC 5070</td>
      <td>Emission Nebula</td>
      <td>51.2</td>
      <td>ENE</td>
      <td>70.2</td>
    </tr>
    <tr>
      <td>M3</td>
      <td>Globular cluster</td>
      <td>45.4</td>
      <td>W</td>
      <td>266.7</td>
    </tr>
    <tr>
      <td>NGC 6992</td>
      <td>Supernova Remnant</td>
      <td>44.4</td>
      <td>E</td>
      <td>87.4</td>
    </tr>
    <tr>
      <td>M12</td>
      <td>Globular cluster</td>
      <td>42.8</td>
      <td>S</td>
      <td>188.8</td>
    </tr>
    <tr>
      <td>M14</td>
      <td>Globular cluster</td>
      <td>41.6</td>
      <td>S</td>
      <td>171.7</td>
    </tr>
    <tr>
      <td>M10</td>
      <td>Globular cluster</td>
      <td>40.9</td>
      <td>S</td>
      <td>185.2</td>
    </tr>
    <tr>
      <td>M5</td>
      <td>Globular cluster</td>
      <td>40.3</td>
      <td>SW</td>
      <td>218.9</td>
    </tr>
  </tbody>
</table></div>
                </section>
                

                <section id="hour-2025-08-28_2100" class="hour-tab-panel hidden">
                  <h3>2025-08-28 21:00</h3>
                  <div class="table-wrap"><table class="dataframe" id="tbl-hour-2025-08-28_2100">
  <thead>
    <tr style="text-align: right;">
      <th>Name</th>
      <th>Type</th>
      <th>Alt (°)</th>
      <th>Dir</th>
      <th>Az (°)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Moon</td>
      <td>Moon</td>
      <td>7.5</td>
      <td>SW</td>
      <td>231.5</td>
    </tr>
    <tr>
      <td>M92</td>
      <td>Globular cluster</td>
      <td>79.7</td>
      <td>W</td>
      <td>265.5</td>
    </tr>
    <tr>
      <td>M13</td>
      <td>Globular cluster</td>
      <td>70.8</td>
      <td>WSW</td>
      <td>252.1</td>
    </tr>
    <tr>
      <td>M56</td>
      <td>Globular cluster</td>
      <td>70.8</td>
      <td>SE</td>
      <td>134.2</td>
    </tr>
    <tr>
      <td>M71</td>
      <td>Globular cluster</td>
      <td>56.7</td>
      <td>SE</td>
      <td>133.0</td>
    </tr>
    <tr>
      <td>M57</td>
      <td>Planetary nebula</td>
      <td>75.9</td>
      <td>SE</td>
      <td>143.1</td>
    </tr>
    <tr>
      <td>NGC 6960</td>
      <td>Supernova Remnant</td>
      <td>58.6</td>
      <td>ESE</td>
      <td>104.0</td>
    </tr>
    <tr>
      <td>NGC 7000</td>
      <td>Emission Nebula</td>
      <td>61.4</td>
      <td>ENE</td>
      <td>75.8</td>
    </tr>
    <tr>
      <td>IC 5070</td>
      <td>Emission Nebula</td>
      <td>61.4</td>
      <td>ENE</td>
      <td>76.2</td>
    </tr>
    <tr>
      <td>NGC 6992</td>
      <td>Supernova Remnant</td>
      <td>55.0</td>
      <td>E</td>
      <td>98.6</td>
    </tr>
    <tr>
      <td>M15</td>
      <td>Globular cluster</td>
      <td>37.1</td>
      <td>ESE</td>
      <td>112.0</td>
    </tr>
    <tr>
      <td>M27</td>
      <td>Planetary nebula</td>
      <td>59.1</td>
      <td>SE</td>
      <td>126.6</td>
    </tr>
    <tr>
      <td>M14</td>
      <td>Globular cluster</td>
      <td>41.3</td>
      <td>SSW</td>
      <td>191.8</td>
    </tr>
    <tr>
      <td>M12</td>
      <td>Globular cluster</td>
      <td>39.4</td>
      <td>SSW</td>
      <td>208.3</td>
    </tr>
    <tr>
      <td>M10</td>
      <td>Globular cluster</td>
      <td>38.2</td>
      <td>SSW</td>
      <td>204.4</td>
    </tr>
    <tr>
      <td>M3</td>
      <td>Globular cluster</td>
      <td>34.8</td>
      <td>W</td>
      <td>277.0</td>
    </tr>
  </tbody>
</table></div>
                </section>
                

                <section id="hour-2025-08-28_2200" class="hour-tab-panel hidden">
                  <h3>2025-08-28 22:00</h3>
                  <div class="table-wrap"><table class="dataframe" id="tbl-hour-2025-08-28_2200">
  <thead>
    <tr style="text-align: right;">
      <th>Name</th>
      <th>Type</th>
      <th>Alt (°)</th>
      <th>Dir</th>
      <th>Az (°)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Saturn</td>
      <td>Planet</td>
      <td>10.7</td>
      <td>ESE</td>
      <td>104.0</td>
    </tr>
    <tr>
      <td>M92</td>
      <td>Globular cluster</td>
      <td>69.1</td>
      <td>W</td>
      <td>275.7</td>
    </tr>
    <tr>
      <td>M56</td>
      <td>Globular cluster</td>
      <td>75.4</td>
      <td>S</td>
      <td>177.4</td>
    </tr>
    <tr>
      <td>M13</td>
      <td>Globular cluster</td>
      <td>60.3</td>
      <td>W</td>
      <td>267.0</td>
    </tr>
    <tr>
      <td>M71</td>
      <td>Globular cluster</td>
      <td>62.7</td>
      <td>SSE</td>
      <td>158.8</td>
    </tr>
    <tr>
      <td>NGC 6960</td>
      <td>Supernova Remnant</td>
      <td>68.4</td>
      <td>ESE</td>
      <td>123.2</td>
    </tr>
    <tr>
      <td>NGC 7000</td>
      <td>Emission Nebula</td>
      <td>71.9</td>
      <td>E</td>
      <td>81.6</td>
    </tr>
    <tr>
      <td>IC 5070</td>
      <td>Emission Nebula</td>
      <td>71.8</td>
      <td>E</td>
      <td>82.2</td>
    </tr>
    <tr>
      <td>M57</td>
      <td>Planetary nebula</td>
      <td>77.6</td>
      <td>SSW</td>
      <td>199.9</td>
    </tr>
    <tr>
      <td>NGC 6992</td>
      <td>Supernova Remnant</td>
      <td>65.3</td>
      <td>ESE</td>
      <td>114.6</td>
    </tr>
    <tr>
      <td>M15</td>
      <td>Globular cluster</td>
      <td>46.3</td>
      <td>SE</td>
      <td>127.4</td>
    </tr>
    <tr>
      <td>M27</td>
      <td>Planetary nebula</td>
      <td>66.0</td>
      <td>SSE</td>
      <td>153.0</td>
    </tr>
    <tr>
      <td>Neptune</td>
      <td>Planet</td>
      <td>11.3</td>
      <td>ESE</td>
      <td>102.5</td>
    </tr>
    <tr>
      <td>M14</td>
      <td>Globular cluster</td>
      <td>37.4</td>
      <td>SSW</td>
      <td>210.6</td>
    </tr>
    <tr>
      <td>M29</td>
      <td>Open cluster</td>
      <td>75.5</td>
      <td>ESE</td>
      <td>109.2</td>
    </tr>
    <tr>
      <td>M2</td>
      <td>Globular cluster</td>
      <td>34.9</td>
      <td>SE</td>
      <td>135.6</td>
    </tr>
  </tbody>
</table></div>
                </section>
                

                <section id="hour-2025-08-28_2300" class="hour-tab-panel hidden">
                  <h3>2025-08-28 23:00</h3>
                  <div class="table-wrap"><table class="dataframe" id="tbl-hour-2025-08-28_2300">
  <thead>
    <tr style="text-align: right;">
      <th>Name</th>
      <th>Type</th>
      <th>Alt (°)</th>
      <th>Dir</th>
      <th>Az (°)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Saturn</td>
      <td>Planet</td>
      <td>20.7</td>
      <td>ESE</td>
      <td>115.7</td>
    </tr>
    <tr>
      <td>M56</td>
      <td>Globular cluster</td>
      <td>71.6</td>
      <td>SW</td>
      <td>222.5</td>
    </tr>
    <tr>
      <td>M92</td>
      <td>Globular cluster</td>
      <td>58.5</td>
      <td>WNW</td>
      <td>282.8</td>
    </tr>
    <tr>
      <td>NGC 7000</td>
      <td>Emission Nebula</td>
      <td>82.5</td>
      <td>E</td>
      <td>87.9</td>
    </tr>
    <tr>
      <td>IC 5070</td>
      <td>Emission Nebula</td>
      <td>82.5</td>
      <td>E</td>
      <td>89.4</td>
    </tr>
    <tr>
      <td>M71</td>
      <td>Globular cluster</td>
      <td>63.7</td>
      <td>S</td>
      <td>190.6</td>
    </tr>
    <tr>
      <td>NGC 6960</td>
      <td>Supernova Remnant</td>
      <td>75.2</td>
      <td>SSE</td>
      <td>159.4</td>
    </tr>
    <tr>
      <td>NGC 6992</td>
      <td>Supernova Remnant</td>
      <td>73.7</td>
      <td>SE</td>
      <td>143.2</td>
    </tr>
    <tr>
      <td>M13</td>
      <td>Globular cluster</td>
      <td>49.6</td>
      <td>W</td>
      <td>277.1</td>
    </tr>
    <tr>
      <td>M15</td>
      <td>Globular cluster</td>
      <td>53.6</td>
      <td>SSE</td>
      <td>147.4</td>
    </tr>
    <tr>
      <td>M57</td>
      <td>Planetary nebula</td>
      <td>70.6</td>
      <td>WSW</td>
      <td>239.7</td>
    </tr>
    <tr>
      <td>Neptune</td>
      <td>Planet</td>
      <td>21.4</td>
      <td>ESE</td>
      <td>114.1</td>
    </tr>
    <tr>
      <td>M27</td>
      <td>Planetary nebula</td>
      <td>67.8</td>
      <td>S</td>
      <td>188.6</td>
    </tr>
    <tr>
      <td>M29</td>
      <td>Open cluster</td>
      <td>83.5</td>
      <td>SSE</td>
      <td>162.1</td>
    </tr>
    <tr>
      <td>NGC 7635</td>
      <td>Emission Nebula</td>
      <td>58.0</td>
      <td>NE</td>
      <td>41.9</td>
    </tr>
    <tr>
      <td>M2</td>
      <td>Globular cluster</td>
      <td>41.1</td>
      <td>SSE</td>
      <td>153.0</td>
    </tr>
  </tbody>
</table></div>
                </section>
                

                <section id="hour-2025-08-29_0000" class="hour-tab-panel hidden">
                  <h3>2025-08-29 00:00</h3>
                  <div class="table-wrap"><table class="dataframe" id="tbl-hour-2025-08-29_0000">
  <thead>
    <tr style="text-align: right;">
      <th>Name</th>
      <th>Type</th>
      <th>Alt (°)</th>
      <th>Dir</th>
      <th>Az (°)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Saturn</td>
      <td>Planet</td>
      <td>29.7</td>
      <td>SE</td>
      <td>129.0</td>
    </tr>
    <tr>
      <td>NGC 7000</td>
      <td>Emission Nebula</td>
      <td>86.8</td>
      <td>W</td>
      <td>267.8</td>
    </tr>
    <tr>
      <td>IC 5070</td>
      <td>Emission Nebula</td>
      <td>86.8</td>
      <td>W</td>
      <td>264.3</td>
    </tr>
    <tr>
      <td>M56</td>
      <td>Globular cluster</td>
      <td>62.8</td>
      <td>WSW</td>
      <td>247.7</td>
    </tr>
    <tr>
      <td>M92</td>
      <td>Globular cluster</td>
      <td>48.3</td>
      <td>WNW</td>
      <td>289.5</td>
    </tr>
    <tr>
      <td>NGC 6992</td>
      <td>Supernova Remnant</td>
      <td>76.0</td>
      <td>SSW</td>
      <td>193.2</td>
    </tr>
    <tr>
      <td>NGC 6960</td>
      <td>Supernova Remnant</td>
      <td>74.3</td>
      <td>SSW</td>
      <td>210.0</td>
    </tr>
    <tr>
      <td>M71</td>
      <td>Globular cluster</td>
      <td>59.2</td>
      <td>SW</td>
      <td>219.1</td>
    </tr>
    <tr>
      <td>M15</td>
      <td>Globular cluster</td>
      <td>57.3</td>
      <td>S</td>
      <td>172.6</td>
    </tr>
    <tr>
      <td>M13</td>
      <td>Globular cluster</td>
      <td>39.2</td>
      <td>WNW</td>
      <td>285.7</td>
    </tr>
    <tr>
      <td>Neptune</td>
      <td>Planet</td>
      <td>30.6</td>
      <td>SE</td>
      <td>127.4</td>
    </tr>
    <tr>
      <td>Uranus</td>
      <td>Planet</td>
      <td>6.9</td>
      <td>ENE</td>
      <td>68.3</td>
    </tr>
    <tr>
      <td>M57</td>
      <td>Planetary nebula</td>
      <td>60.6</td>
      <td>WSW</td>
      <td>258.7</td>
    </tr>
    <tr>
      <td>NGC 7635</td>
      <td>Emission Nebula</td>
      <td>64.8</td>
      <td>NE</td>
      <td>37.4</td>
    </tr>
    <tr>
      <td>M39</td>
      <td>Open cluster</td>
      <td>85.2</td>
      <td>NE</td>
      <td>37.6</td>
    </tr>
    <tr>
      <td>M27</td>
      <td>Planetary nebula</td>
      <td>63.3</td>
      <td>SW</td>
      <td>220.7</td>
    </tr>
  </tbody>
</table></div>
                </section>
                

                <section id="hour-2025-08-29_0100" class="hour-tab-panel hidden">
                  <h3>2025-08-29 01:00</h3>
                  <div class="table-wrap"><table class="dataframe" id="tbl-hour-2025-08-29_0100">
  <thead>
    <tr style="text-align: right;">
      <th>Name</th>
      <th>Type</th>
      <th>Alt (°)</th>
      <th>Dir</th>
      <th>Az (°)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Saturn</td>
      <td>Planet</td>
      <td>37.0</td>
      <td>SE</td>
      <td>144.8</td>
    </tr>
    <tr>
      <td>M56</td>
      <td>Globular cluster</td>
      <td>52.5</td>
      <td>W</td>
      <td>262.6</td>
    </tr>
    <tr>
      <td>NGC 7000</td>
      <td>Emission Nebula</td>
      <td>76.2</td>
      <td>W</td>
      <td>276.0</td>
    </tr>
    <tr>
      <td>IC 5070</td>
      <td>Emission Nebula</td>
      <td>76.1</td>
      <td>W</td>
      <td>275.2</td>
    </tr>
    <tr>
      <td>NGC 6992</td>
      <td>Supernova Remnant</td>
      <td>69.9</td>
      <td>SW</td>
      <td>233.3</td>
    </tr>
    <tr>
      <td>M92</td>
      <td>Globular cluster</td>
      <td>38.5</td>
      <td>WNW</td>
      <td>296.2</td>
    </tr>
    <tr>
      <td>NGC 6960</td>
      <td>Supernova Remnant</td>
      <td>66.5</td>
      <td>WSW</td>
      <td>241.7</td>
    </tr>
    <tr>
      <td>Neptune</td>
      <td>Planet</td>
      <td>38.1</td>
      <td>SE</td>
      <td>143.2</td>
    </tr>
    <tr>
      <td>Uranus</td>
      <td>Planet</td>
      <td>17.2</td>
      <td>ENE</td>
      <td>78.2</td>
    </tr>
    <tr>
      <td>M15</td>
      <td>Globular cluster</td>
      <td>56.1</td>
      <td>SSW</td>
      <td>199.5</td>
    </tr>
    <tr>
      <td>M71</td>
      <td>Globular cluster</td>
      <td>51.0</td>
      <td>WSW</td>
      <td>239.7</td>
    </tr>
    <tr>
      <td>NGC 7635</td>
      <td>Emission Nebula</td>
      <td>70.5</td>
      <td>NNE</td>
      <td>25.7</td>
    </tr>
    <tr>
      <td>M13</td>
      <td>Globular cluster</td>
      <td>29.1</td>
      <td>WNW</td>
      <td>293.8</td>
    </tr>
    <tr>
      <td>M2</td>
      <td>Globular cluster</td>
      <td>43.6</td>
      <td>SSW</td>
      <td>194.0</td>
    </tr>
    <tr>
      <td>M39</td>
      <td>Open cluster</td>
      <td>81.8</td>
      <td>WNW</td>
      <td>301.0</td>
    </tr>
    <tr>
      <td>NGC 281</td>
      <td>Emission Nebula</td>
      <td>62.8</td>
      <td>NE</td>
      <td>49.8</td>
    </tr>
  </tbody>
</table></div>
                </section>
                
          </section>
        

  <p class="small warn">Night-vision mode: red on black. Keep device brightness low at the scope.</p>
</div>

    <script>
    function filterTables(q) {
      const needle = q.trim().toLowerCase();
      const tables = document.querySelectorAll('table');
      tables.forEach(tbl => {
        const rows = tbl.tBodies[0]?.rows || [];
        for (let r of rows) {
          const txt = r.innerText.toLowerCase();
          r.style.display = (!needle || txt.includes(needle)) ? '' : 'none';
        }
      });
    }

    function activateMainTab(targetId) {
      document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tab-panel').forEach(el => el.classList.add('hidden'));
      const tabBtn = document.querySelector('.tab[data-tab="' + targetId + '"]');
      if (tabBtn) tabBtn.classList.add('active');
      const panel = document.getElementById(targetId);
      if (panel) panel.classList.remove('hidden');
      updateStickyOffset(); // in case height of control bar changed
    }

    function showHourPanel(hourId) {
      activateMainTab('panel-hourly');
      const all = document.querySelectorAll('.hour-tab-panel');
      all.forEach(el => el.classList.add('hidden'));
      const target = document.getElementById(hourId);
      if (target) {
        target.classList.remove('hidden');
        const y = target.getBoundingClientRect().top + window.scrollY - 70;
        window.scrollTo({ top: y, behavior: 'instant' });
      }
    }

    function openAccordion(hourId) {
      const det = document.getElementById(hourId);
      if (det && det.tagName.toLowerCase() === 'details') {
        det.open = true;
        const y = det.getBoundingClientRect().top + window.scrollY - 70;
        window.scrollTo({ top: y, behavior: 'instant' });
      }
    }

    function handleHourNavClick(e) {
      const href = e.currentTarget.getAttribute('href') || '';
      if (!href.startsWith('#')) return;
      e.preventDefault();
      const id = href.slice(1);
      if (document.getElementById('panel-hourly')) {
        showHourPanel(id);
      } else {
        openAccordion(id);
      }
      history.replaceState(null, '', href);
    }

    function initTabsBehavior() {
      const tabs = document.querySelectorAll('[data-tab]');
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const target = tab.getAttribute('data-tab');
          activateMainTab(target);
          if (target === 'panel-hourly') {
            const first = document.querySelector('.hour-tab-panel');
            if (first) {
              document.querySelectorAll('.hour-tab-panel').forEach(el => el.classList.add('hidden'));
              first.classList.remove('hidden');
            }
          }
        });
      });
    }

    function initHourLinks() {
      document.querySelectorAll('.control-bar .hours a').forEach(a => {
        a.addEventListener('click', handleHourNavClick);
      });
    }

    function handleHashOnLoad() {
      const hash = window.location.hash;
      if (!hash) return;
      const id = hash.slice(1);
      if (document.getElementById('panel-hourly')) {
        showHourPanel(id);
      } else {
        openAccordion(id);
      }
    }

    // ---- Sortable Master Table ----
    function parseHHMM(s) {
      const m = /^\s*(\d{1,2}):(\d{2})\s*$/.exec(s || "");
      if (!m) return NaN;
      return parseInt(m[1], 10) * 60 + parseInt(m[2], 10);
    }

    function sortTableByColumn(table, colIndex, numeric=false, time=false, asc=true) {
      const tbody = table.tBodies[0];
      const rows = Array.from(tbody.querySelectorAll('tr'));
      const dir = asc ? 1 : -1;

      rows.sort((a, b) => {
        let A = a.children[colIndex]?.innerText || "";
        let B = b.children[colIndex]?.innerText || "";
        if (time) {
          A = parseHHMM(A); B = parseHHMM(B);
          if (isNaN(A)) A = -Infinity; if (isNaN(B)) B = -Infinity;
        } else if (numeric) {
          A = parseFloat(A); B = parseFloat(B);
          if (isNaN(A)) A = -Infinity; if (isNaN(B)) B = -Infinity;
        } else {
          A = A.toLowerCase(); B = B.toLowerCase();
        }
        if (A < B) return -1 * dir;
        if (A > B) return  1 * dir;
        return 0;
      });

      rows.forEach(r => tbody.appendChild(r));
    }

    function makeMasterTableSortable() {
      const tbl = document.getElementById('tbl-master');
      if (!tbl) return;

      const headers = Array.from(tbl.tHead?.rows[0]?.cells || []);
      const colMap = {};
      headers.forEach((th, i) => {
        const label = (th.innerText || "").trim().toLowerCase();
        if (["name","type"].includes(label)) {
          colMap[label] = { idx: i, numeric: false, time: false };
        } else if (label.startsWith("mag")) {
          colMap["mag"] = { idx: i, numeric: true, time: false };
        } else if (label.startsWith("best local time")) {
          colMap["best local time"] = { idx: i, numeric: false, time: true };
        }
      });

      Object.entries(colMap).forEach(([_, cfg]) => {
        const th = headers[cfg.idx];
        th.classList.add('sortable');
        let asc = true;
        th.addEventListener('click', () => {
          sortTableByColumn(tbl, cfg.idx, cfg.numeric, cfg.time, asc);
          asc = !asc;
        });
      });
    }

    // ---- Dynamic sticky offset so table headers sit below the control bar
    function updateStickyOffset() {
      const bar = document.querySelector('.control-bar');
      const h = bar ? bar.offsetHeight : 52;
      document.documentElement.style.setProperty('--ctrl-h', h + 'px');
    }

    document.addEventListener('DOMContentLoaded', () => {
      const input = document.getElementById('q');
      if (input) input.addEventListener('input', () => filterTables(input.value));

      initTabsBehavior();
      initHourLinks();
      makeMasterTableSortable();
      updateStickyOffset();
      handleHashOnLoad();
    });

    window.addEventListener('resize', updateStickyOffset);
    </script>
    
</html>
